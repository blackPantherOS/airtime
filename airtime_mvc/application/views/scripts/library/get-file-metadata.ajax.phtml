<?php if($this->type == "audioclip") : ?>
<div><span>Title:</span><span><?php echo ($this->md["MDATA_KEY_TITLE"]);?></span></div>
<div><span>Creator:</span><span><?php echo ($this->md["MDATA_KEY_CREATOR"]);?></span></div>
<div><span>Album:</span><span><?php echo ($this->md["MDATA_KEY_SOURCE"]);?></span></div>
<div><span>Track:</span><span><?php echo ($this->md["MDATA_KEY_TRACKNUMBER"]);?></span></div>
<div><span>Length:</span><span><?php echo ($this->md["MDATA_KEY_DURATION"]);?></span></div>
<div><span>Sample Rate:</span><span><?php echo ($this->md["MDATA_KEY_SAMPLERATE"]);?></span></div>
<div><span>Bit Rate:</span><span><?php echo ($this->md["MDATA_KEY_BITRATE"]);?></span></div>
<div><span>Mood:</span><span><?php echo ($this->md["MDATA_KEY_MOOD"]);?></span></div>
<div><span>Genre:</span><span><?php echo ($this->md["MDATA_KEY_GENRE"]);?></span></div>
<div><span>Year:</span><span><?php echo ($this->md["MDATA_KEY_YEAR"]);?></span></div>
<div><span>Label:</span><span><?php echo ($this->md["MDATA_KEY_LABEL"]);?></span></div>
<div><span>BPM:</span><span><?php echo ($this->md["MDATA_KEY_BPM"]);?></span></div>
<div><span>Composer:</span><span><?php echo ($this->md["MDATA_KEY_COMPOSER"]);?></span></div>
<div><span>Conductor:</span><span><?php echo ($this->md["MDATA_KEY_CONDUCTOR"]);?></span></div>
<div><span>Copyright:</span><span><?php echo ($this->md["MDATA_KEY_COPYRIGHT"]);?></span></div>
<div><span>Isrc Number:</span><span><?php echo ($this->md["MDATA_KEY_ISRC"]);?></span></div>
<div><span>Website:</span><span><?php echo ($this->md["MDATA_KEY_URL"]);?></span></div>
<div><span>Language:</span><span><?php echo ($this->md["MDATA_KEY_LANGUAGE"]);?></span></div>
<div><span>File&nbsp;Path:</span><span><?php echo ($this->md["MDATA_KEY_FILEPATH"]);?></span></div>

<?php endif; ?>

<?php if($this->type == "playlist" || $this->type == "block") : ?>
<div><span>Name:</span><span><?php echo ($this->md["dc:title"]);?></span></div>
<div><span>Creator:</span><span><?php echo ($this->md["dc:creator"]);?></span></div>
<?php if ($this->type == "block" && $this->blType == "Dynamic") { ?>
    <?php if ($this->contents["limit"]["modifier"] == "items") { ?>
        <?php $len = $this->contents["limit"]["value"]." tracks"; ?>
    <?php } elseif ($this->contents["limit"]["modifier"] == "minutes") { ?>
        <?php
        $mins = $this->contents["limit"]["value"];
        if ($mins > 59) {
            $hours = intval($mins / 60);
            $minutes = $mins % 60;
            $len = $hours.":".str_pad($minutes, 2, "0", STR_PAD_LEFT).":00.0";    
        } else {
            $len = $this->contents["limit"]["value"].":00.0";
        }
        ?>
    <?php } else {?>
        <?php $len = $this->contents["limit"]["value"].":00:00.0"; ?>
    <?php } ?>
    <div><span>Length:</span><span><?php echo $len;?></span></div>
<?php } else { ?>
<div><span>Length:</span><span><?php echo ($this->md["dcterms:extent"]);?></span></div>
<?php } ?>
<div><span>Description:</span><span><?php echo ($this->md["dc:description"]);?></span></div>
    <?php if ($this->type == "playlist" || ($this->type == "block" && $this->blType == "Static")) {?>
        <?php if ($this->type == "playlist") { ?>
            <div><span>Playlist Contents: </span></div>
        <?php } else { ?>
            <div><span>Static Playlist Contents: </span></div>
        <?php } ?>
        <table class='library-get-file-md'>
        <?php foreach($this->contents as $row) : ?>
            <?php
            $titleMaxStrLen = 35;
            if (strlen($row["track_title"]) > $titleMaxStrLen) {
                $row["track_title"] = substr($row["track_title"], 0, 34)."...";
            }
            $artistMaxStrLen = 22;
            if (strlen($row["creator"]) > $artistMaxStrLen) {
                $row["creator"] = substr($row["creator"], 0, 21)."...";
            }
            ?>
            <?php if ($row["type"] == 2) {
                $bl = new Application_Model_Block($row["item_id"]);
                $isStatic = $bl->isStatic(); ?>
                <tr class='file-md-qtip-playlist <?php if ($isStatic) echo 'static'; else echo 'dynamic';?>'>
                    <td colspan="3"><?php if ($isStatic) echo 'Static Playlist'; else echo 'Dynamic Playlist';?></td>
                </tr>
                <tr class='file-md-qtip-playlist <?php if ($isStatic) echo 'static'; else echo 'dynamic';?>'>
                    <td class='file-md-qtip-row-width-title'><?php echo $row["track_title"] ?></td>
                    <td class='file-md-qtip-row-width-artist'><?php echo $row["creator"] ?></td>
                    <?php if (!$isStatic) { ?>
                        <?php $criteria = $bl->getCriteria();?>
                        <?php $len = $bl->getLength();?>
                        <td class='file-md-qtip-row-width-small'><?php echo $len ?></td>
                    <?php } else { ?>
                        <td class='file-md-qtip-row-width-small'><?php echo $row["length"] ?></td>
                    <?php } ?>
                </tr>
            <?php } else { ?>
                <tr>
                    <td class='file-md-qtip-row-width-title'><?php echo $row["track_title"] ?></td>
                    <td class='file-md-qtip-row-width-artist'><?php echo $row["creator"] ?></td>
                    <td class='file-md-qtip-row-width-small'><?php echo $row["length"] ?></td>
                </tr>
            <?php } ?>
        <?php endforeach; ?>
        </table>
        
    <?php } elseif ($this->blType == "Dynamic") { ?>
        <div><span>Dynamic Playlist Criteria: </span></div>
        <table class='library-get-file-md'>
        <?php foreach ($this->contents["crit"] as $criterias) : ?>
            <?php foreach ($criterias as $crit ) : ?>
                <?php
                $maxStrLen = 25;
                if (strlen($crit["value"]) > $maxStrLen) {
                    $crit["value"] = substr($crit["value"], 0, 24)."...";
                }
                ?>
                <tr>
                    <td class='file-md-qtip-criteria-width-small'><?php echo $crit["display_name"] ?></td>
                    <td class='file-md-qtip-criteria-width-small'><?php echo $crit["modifier"] ?></td>
                    <td class='file-md-qtip-criteria-width'><?php echo $crit["value"] ?>
                    <?php if (isset($crit["extra"])) { ?>
                        to <?php echo $crit["extra"] ?></td>
                    <?php } ?>
                </tr>
            <?php endforeach; ?>
        <?php endforeach; ?>
            <tr>
                <td>Limit to </td>
                <td><?php echo $this->contents["limit"]["value"] ?> <?php echo $this->contents["limit"]["modifier"] ?></td>
            </tr>
        </table>
    <?php } ?>
<?php endif; ?>

<?php if ($this->type == "stream") : ?>

<div><span>Name:</span><span><?php echo ($this->md["name"]);?></span></div>
<div><span>Length:</span><span><?php echo ($this->md["length"]);?></span></div>
<div><span>Creator:</span><span><?php echo ($this->md["login"]);?></span></div>
<div><span>Description:</span><span><?php echo ($this->md["description"]);?></span></div>
<div><span>URL:</span><span><?php echo ($this->md["url"]);?></span></div>


<?php endif; ?>
